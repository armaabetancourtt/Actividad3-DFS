<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audi</title>
    <link rel="stylesheet" href="../css/tareas.css">
    <link rel="icon" type="image/png" href="../../ACT1/img/favicon.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>

<body>

    <div id="menu-icon">
        <i class="fa-solid fa-bars"></i>
    </div>

    <nav id="nav-menu">
        <div id="close-icon">
            <i class="fa-solid fa-xmark"></i>
        </div>
        <ul id="nav-menu-list">
            <li><a href="../../index.html">Inicio</a></li>
            <li><a href="dashboard.html">Dashboard</a></li>
            <li><a href="tareas.html">Gestor de Tareas</a></li>
            <li><a href="../../ACT4/pages/productos.html">Gestor de Productos</a></li>
            <li id="logout-item"><a href="#" id="btn-logout">Cerrar Sesión</a></li>
        </ul>
    </nav>

    <header id="hero">
        <div id="hero-overlay"></div>

        <div id="hero-content">
            <div id="logo">
                <img src="../../ACT1/img/logo.webp" alt="Audi Logo">
            </div>

            <div id="form-container">
                <article id="form-card">
                    <h2 id="form-title">Gestor de Tareas</h2>

                    <input type="hidden" id="edit-id" value="">

                    <div id="form-grid">
                        <div class="input-group full-width">
                            <label for="tituloTarea">Título de la Tarea</label>
                            <input type="text" id="tituloTarea" placeholder="Ej. Revisión de frenos A4" autocomplete="off">
                        </div>

                        <div class="input-group full-width">
                            <label for="descripcionTarea">Descripción Detallada</label>
                            <textarea id="descripcionTarea" placeholder="Escriba los detalles técnicos aquí..." rows="3"></textarea>
                        </div>

                        <div class="input-group">
                            <label for="asignadoA">Responsable</label>
                            <select id="asignadoA">
                                <option value="">Cargando técnicos...</option>
                            </select>
                        </div>

                        <div class="input-group">
                            <label for="categoriaTarea">Departamento</label>
                            <select id="categoriaTarea">
                                <option value="Mantenimiento">Mantenimiento</option>
                                <option value="Ventas">Ventas</option>
                                <option value="Inventario">Inventario</option>
                                <option value="Soporte">Soporte</option>
                            </select>
                        </div>

                        <div class="input-group">
                            <label for="estadoOperativo">Prioridad/Estado</label>
                            <select id="estadoOperativo">
                                <option value="Sin Iniciar">Sin Iniciar</option>
                                <option value="En Progreso">En Progreso</option>
                                <option value="Finalizado">Finalizado</option>
                            </select>
                        </div>

                        <div class="input-group full-width">
                            <label>Fecha de Entrega</label>
                            <div class="fecha-custom-group" style="display: flex; gap: 10px;">
                                <select id="fecha-dia" style="flex: 1;"></select>
                                <select id="fecha-mes" style="flex: 1.5;">
                                    <option value="01">ENE</option>
                                    <option value="02">FEB</option>
                                    <option value="03">MAR</option>
                                    <option value="04">ABR</option>
                                    <option value="05">MAY</option>
                                    <option value="06">JUN</option>
                                    <option value="07">JUL</option>
                                    <option value="08">AGO</option>
                                    <option value="09">SEP</option>
                                    <option value="10">OCT</option>
                                    <option value="11">NOV</option>
                                    <option value="12">DIC</option>
                                </select>
                                <select id="fecha-anio" style="flex: 1.2;"></select>
                            </div>
                        </div>

                        <div id="form-actions" class="full-width">
                            <button id="btn-audi" class="btn-audi" type="button">Registrar en Sistema</button>
                            <button id="btn-cancel" class="btn-cancel" type="button" style="display: none;">Cancelar Edición</button>
                            <button id="btn-borrar-todo" class="btn-delete" type="button">Limpiar Historial</button>
                        </div>
                    </div>

                    <p id="error-msg" class="error" style="display: none;">
                        <i class="fa-solid fa-triangle-exclamation"></i> Error: Todos los campos técnicos son obligatorios.
                    </p>
                </article>
            </div>
        </div>
    </header>

    <main id="container">
        <div class="status-bar">
            <h3><i class="fa-solid fa-file-signature"></i> Tareas Creadas por Mí</h3>
        </div>
        <ul id="task-grid-creadas" class="task-grid"></ul>

        <div class="status-bar" style="margin-top: 50px;">
            <h3><i class="fa-solid fa-user-gear"></i> Tareas Asignadas a Mí</h3>
        </div>
        <ul id="task-grid-asignadas" class="task-grid"></ul>
    </main>

    <footer id="footer">
        <div id="footer-logo">
            <img src="../../ACT1/img/logo.webp" alt="Logo de Audi">
        </div>

        <div class="redes">
            <a href="https://www.facebook.com/Audi" target="_blank">
                <i class="fa-brands fa-facebook-f"></i> Facebook
            </a>
            <a href="https://www.instagram.com/audi/" target="_blank">
                <i class="fa-brands fa-instagram"></i> Instagram
            </a>
            <a href="https://www.linkedin.com/company/audi-ag/" target="_blank" rel="noopener noreferrer">
                <i class="fa-brands fa-linkedin-in"></i> LinkedIn
            </a>
        </div>

        <p class="copyright">
            © 2026 Audi. Todos los Derechos Reservados.
        </p>
    </footer>

    <script src="../js/tareas.js"></script>

    <script>
        document.getElementById('btn-logout').addEventListener('click', (e) => {
            e.preventDefault();
            localStorage.removeItem('audi_token');
            localStorage.removeItem('audi_user_name');
            window.location.href = '../../ACT3/pages/login.html';
        });
    </script>

</body>
</html>